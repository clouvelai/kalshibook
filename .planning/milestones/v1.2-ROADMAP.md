# Milestone v1.2: Discovery & Replay

**Status:** SHIPPED 2026-02-18
**Phases:** 13-15
**Total Plans:** 5

## Overview

Make the API foundation production-ready and compelling -- users can discover available market data, see real tickers in the playground, and visually explore orderbook depth at any covered timestamp.

## Phases

### Phase 13: Market Coverage Discovery

**Goal**: Users can discover which markets have data, how much, and where the gaps are
**Depends on**: Phase 12 (v1.1 complete)
**Requirements**: COVR-01, COVR-02, COVR-03, COVR-04, COVR-05
**Plans**: 2 plans

Plans:
- [x] 13-01: Materialized view migration + FastAPI coverage endpoint + response models
- [x] 13-02: Coverage dashboard page with table, search, filters, timeline bars, summary cards

**Success Criteria** (what must be TRUE):
  1. User can view a paginated table of all markets with data, showing contiguous coverage segments (date ranges with gap boundaries) for each
  2. User can see per-market summary stats (total data points, segment count, snapshot/delta/trade counts) that load in under 2 seconds
  3. User can search markets by ticker substring and filter by event or active/settled status, with results updating as they type
  4. Coverage stats are served from a pre-computed materialized view, not live partition scans
  5. Coverage segments reflect actual data gaps -- a market with data on days 1-3 and 7-10 shows two segments, not one range of 1-10

### Phase 14: Playground Upgrade

**Goal**: Users can explore the API through the playground without guessing tickers or burning credits
**Depends on**: Phase 13
**Requirements**: PLAY-01, PLAY-02, PLAY-03, PLAY-04
**Plans**: 2 plans

Plans:
- [x] 14-01: Backend playground endpoints (market search + demo execution) and shadcn component install
- [x] 14-02: Frontend integration (TickerCombobox, ExampleCards, playground wiring)

**Success Criteria** (what must be TRUE):
  1. Playground ticker input pre-populates from real captured markets (not hardcoded values that break when markets settle)
  2. User can type partial ticker text and get autocomplete suggestions from markets with confirmed data coverage
  3. Playground shows example cards with pre-populated queries for common use cases (orderbook reconstruction, trade history, candles) that execute with one click
  4. All playground demo interactions cost zero credits -- served via dashboard-internal endpoint or pre-baked responses, not through the billed API path

### Phase 15: Depth Chart Visualization

**Goal**: Users can visually inspect orderbook depth at any covered timestamp, rendered as a Canvas-based chart in the playground
**Depends on**: Phase 14
**Requirements**: DPTH-01, DPTH-02, DPTH-03, PLAY-05
**Plans**: 1 plan

Plans:
- [x] 15-01: Canvas depth chart component + response panel tab integration

**Success Criteria** (what must be TRUE):
  1. User can view a depth chart showing Yes and No sides across the 0-100 cent price range for any market at any covered timestamp
  2. Depth chart renders using HTML Canvas (not SVG) to support future animation without a rewrite
  3. Depth chart is accessible as a tab in the playground alongside the existing API response view
  4. Selecting a different market or timestamp in the playground updates the depth chart accordingly

## Milestone Summary

**Key Decisions:**
- Coverage must use materialized view (not live partition scans) -- performance at scale
- Coverage modeled as segments (contiguous ranges with gaps), not first/last timestamps
- Gaps-and-islands SQL pattern for segment detection -- avoids false single-range reporting
- Advisory lock on refresh prevents concurrent refresh conflicts without blocking reads
- Event-level pagination (not market-level) -- dashboard shows events as groups
- Depth chart must use Canvas (not SVG) -- future animation support, no rewrite path from SVG
- Playground demos cost zero credits -- dashboard-internal endpoint
- No charting library -- raw Canvas 2D for ~250 lines total, zero bundle impact
- Fixed 0-100 cent X-axis eliminates dynamic scaling complexity
- Replay animation deferred to v1.3 -- ship static depth chart first

**Issues Resolved:**
- None

**Issues Deferred:**
- Animated orderbook replay (RPLY-01/02/03) deferred to v1.3
- Calendar heatmap (COVR-06/07) deferred to v1.3+
- SDK backtesting abstractions (BKTS-01/02/03) deferred to v1.3

**Technical Debt Incurred:**
- Plan checkboxes in ROADMAP.md not auto-checked on completion (cosmetic)

---

_For current project status, see .planning/ROADMAP.md_
