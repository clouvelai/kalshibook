---
phase: 05-dashboard
plan: 05
type: execute
wave: 4
depends_on: ["05-03", "05-04"]
files_modified: []
autonomous: false

must_haves:
  truths:
    - "Logged-in user can view all their API keys, create new keys, and revoke existing keys from the dashboard"
    - "User can see their current credit usage and remaining balance for the billing period"
    - "User can access Stripe's customer portal to manage their subscription and payment methods"
  artifacts: []
  key_links: []
---

<objective>
Verify the complete dashboard flow end-to-end: signup, login, overview, key management, billing.

Purpose: Confirms all Phase 5 success criteria are met before marking the phase complete.

Output: User confirmation that the dashboard works correctly.
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/05-dashboard/05-03-SUMMARY.md
@.planning/phases/05-dashboard/05-04-SUMMARY.md
</context>

<tasks>

<task type="checkpoint:human-verify" gate="blocking">
  <name>Task 1: Verify complete dashboard flow end-to-end</name>
  <action>
    User verifies the complete dashboard flow. What was built:
    1. Login/signup pages (email/password + Google OAuth)
    2. Left sidebar navigation (Overview, API Keys, Billing, Documentation)
    3. Overview page with credit usage bar, PAYG toggle, and keys summary table
    4. API Keys page with create (show-once key modal), view, and revoke functionality
    5. Billing page with plan info, credit usage, and Stripe portal/upgrade links
  </action>
  <verify>
    Prerequisites: Ensure the FastAPI backend is running (`uv run uvicorn src.api.main:app --port 8000`) and Supabase is running (`supabase start`).

    1. Start the dashboard: `cd dashboard && npm run dev`
    2. Visit http://localhost:3000 — should redirect to /login
    3. **Signup flow:**
       a. Click "Sign up" link → go to /signup
       b. Enter email + password → submit
       c. Should redirect to / (Overview page)
       d. Overview should show: usage bar (0/1000 credits, Free plan), PAYG toggle (off), keys table with one "default" dev key
    4. **API Key management:**
       a. Click "API Keys" in sidebar → go to /keys
       b. Click "Create Key" → enter name "production", select "Production" type → create
       c. Raw key should appear in modal — copy it
       d. Close modal — key should be masked in table
       e. Click options dropdown on the new key → "Revoke" → confirm
       f. Key should disappear from table
    5. **Billing:**
       a. Click "Billing" in sidebar → go to /billing
       b. Should show Free plan info, 0/1000 credits used, billing cycle date
       c. PAYG toggle should work (toggle on → toast confirmation)
       d. "Upgrade to Project Plan" button should be visible (clicking it would go to Stripe Checkout)
    6. **Sign out:**
       a. Click "Sign out" at bottom of sidebar
       b. Should redirect to /login
    7. **Login flow:**
       a. Enter the same email + password → submit
       b. Should redirect to / with all data still present
  </verify>
  <done>User confirms all 7 verification steps pass. Type "approved" if all steps pass, or describe any issues found.</done>
</task>

</tasks>

<verification>
Phase 5 success criteria verification:
1. "Logged-in user can view all their API keys, create new keys, and revoke existing keys from the dashboard" — verified via steps 4a-4f
2. "User can see their current credit usage and remaining balance for the billing period" — verified via steps 3d and 5b
3. "User can access Stripe's customer portal to manage their subscription and payment methods" — verified via step 5d (Stripe portal button exists and links correctly)
</verification>

<success_criteria>
User confirms all 7 verification steps pass. Dashboard is complete and all Phase 5 success criteria are met.
</success_criteria>

<output>
After completion, create `.planning/phases/05-dashboard/05-05-SUMMARY.md`
</output>
